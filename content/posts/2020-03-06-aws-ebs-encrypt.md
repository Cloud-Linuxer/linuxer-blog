---
title: "AWS-EBS-encrypt"
date: 2020-03-06T11:14:58+09:00
draft: false
categories: ["AWS"]
tags: ["ebs", "ebsencrypt"]
slug: "aws-ebs-encrypt"
aliases:
  - /aws-ebs-encrypt/
  - /aws-ebs-encrypt/
---


EBS 암호화 과정을 포스팅 하겠다.

일반적으로 EBS는 기본이 암호화를 하지 않도록 설정되어있다. 이미 생성된 볼륨을 암호화 할 순 없다.

따라서 이미 생성된 인스턴스에 연결된 EBS를 암호화 하기위해선 다음과 같은 과정을 거쳐야 한다.

인스턴스종료-스냅샷-EBS 암호화로 볼륨 생성-인스턴스에서 볼륨분리-암호화된 볼륨 연결-인스턴스시작.

![](/images/2020/03/image-6-1024x204.png)

암호화 되지 않은 볼륨이 있다. 이볼륨을 암호화 할거다.

인스턴스를 중지한다.

![](/images/2020/03/image-7.png)

임시스토리지 유실 안내가 나온다.

인스턴스가 중지되면 연결된 EBS를 찾아서 스냅샷을 진행한다.

![](/images/2020/03/image-8-1024x402.png)

tag 를 Name 로 설정하여 잘적자. 생성된 스냅샷으로 볼륨을 생성한다.

![](/images/2020/03/image-9.png)

![](/images/2020/03/image-11-1024x591.png)

추가할 태그는 원래 볼륨에 붙어있던 태그에 -encrypt 태그를 추가하여 원래 볼륨과의 구별을 두자.

![](/images/2020/03/image-12.png)

인스턴스에서 볼륨을 분리한다. 여기서 중요한점은 원래 마운트 되어있는 포지션이다.

![](/images/2020/03/image-13.png)

![](/images/2020/03/image-14.png)

볼륨을 연결한다 이때에 원래의 마운트 포지션에 연결해 준다.

![](/images/2020/03/image-15.png)

중지된 인스턴스는 보인다.

![](/images/2020/03/image-16.png)

디바이스 설정이 중요하다. 먼저 sdf 로 연결하고 인스턴스를 시작해 보겠다.

![](/images/2020/03/image-17.png)

![](/images/2020/03/image-18.png)

루트 디바이스가 없는 경우 시작이 안된다. 그래서 디바이스연결은 /dev/xvda 를 기억하라고 한것이다. 디바이스 마운트 포지션을 변경하려면 분리후 재연결 하여야 한다.

![](/images/2020/03/image-19.png)

/dev/xvda 로 연결하면 루트 디바이스로 인식이 된다.

![](/images/2020/03/image-20.png)

중지 상태인 인스턴스를 시작 하면 정상적으로 시작이된다.

![](/images/2020/03/image-21.png)

![](/images/2020/03/image-22-1024x207.png)

이렇게 볼륨 암호화를 진행하여 보았다.
