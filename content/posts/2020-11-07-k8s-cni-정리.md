---
title: "K8s-CNI-정리"
date: 2020-11-07T20:00:55+09:00
draft: false
categories: ["Kubernetes"]
tags: ["CNI", "iptables", "netfilter", "ipvs"]
slug: "k8s-cni-정리"
aliases:
  - /k8s-cni-정리/
  - /k8s-cni-%ec%a0%95%eb%a6%ac/
---

\n

<https://cloud.google.com/kubernetes-engine/docs/concepts/network-overview?hl=ko>

\n\n\n\n

\nhttps://www.slideshare.net/InfraEngineer/ss-186475759\n

오리뎅이 님의 쿠버네티스 네트워킹 PPT 자료입니다.

\n\n\n\n

**오리뎅이 님의 쿠버네티스 네트워킹 PPT 자료입니다.**

\n\n\n\n\n\n\n\n

두가지 URL로 CNI와 iptables의 연관 관계를 이해하고 정리 해보려한다.

\n\n\n\n

CNI는 L2 / L3 / overlay 를 구성 및 k8s 의 네트워크을 관리한다.  
이 때 k8s의 라우팅은 kube-proxy를 이용해서 iptables 룰을 관리한다.

\n\n\n\n

iptables는 netfilter의 라우팅 룰을 편리하게 사용할수 있도록 만들어진 인터페이스고, 실제로는 패킷을 필터링하고 라우팅하는 역할은 netfilter가 맡게된다.

\n\n\n\n

-\_-;

\n\n\n\n\n\n\n\n

ipvs 모드는 또 다시 생각해보자.

\n\n\n\n

<https://docs.projectcalico.org/networking/enabling-ipvs>

\n\n\n\n

일단 k8s 의 iptables\_mode가 굉장히 비 효율적인 방법이라는건 알 수 있었다.

\n