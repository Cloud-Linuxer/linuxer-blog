---
title: "aws Route53 지역기반 라우팅"
date: 2019-12-30T10:27:18+09:00
draft: false
categories: ["AWS"]
tags: ["route53", "aws route53", "Location route", "지역기반"]
slug: "aws-route53-지역기반-라우팅"
aliases:
  - /aws-route53-지역기반-라우팅/
  - /aws-route53-%ec%a7%80%ec%97%ad%ea%b8%b0%eb%b0%98-%eb%9d%bc%ec%9a%b0%ed%8c%85/
---


route53 지역기반 라우팅(Geolocation)을 이용하여 허용한 지역 이외에는 내 사이트를 열 수 없도록 설정하려고 한다.


근래에 내 블로그가 좀 힘찼다.


잘 관리를 안해서 힘이 없었는데 자꾸 블로그 댓글로 비아그라 광고가 들어왔다..
제길 ㅠㅠ 한30건 정도....


독일쪽 스패머인것으로 보인다.


5.189.131.199


![](/images/2019/12/image-41.png)

그래서 한국/남아메리카/북아메리카를 제외한 모두를 차단하기로 하였다.


먼저 기본값으로 지역기반 라우팅으로 set ID 1로 203.0.113.1 라우팅한다.


203.0.113.1 IP는


<https://tools.ietf.org/html/rfc5737>


사용할수 없는 IP로 보인다. RFC5737을 참조하기 바란다. 따라서 특정하지 않는 모든 라우팅은 203.0.113.1 로 연결되도록 설정하였다.


그리고 set ID 2 / 3 /4 는 한국/남아메리카/북아메리카 로 설정하고 로드벨런서와 연결한다.


![](/images/2019/12/image-42-1024x155.png)

설정값은 다음과 같다.


설정된 한국/남아메리카/북아메리카 제외한 모든접속은 203.0.113.1 로 연결되어 접속할수 없게 된다.


이후 스패머가 또들어오는지 모니터링 해야겠다.


아! 남아메리카/북아메리카 를 열어 준 이유는 google robots 가 크롤링을 할 수 있도록 허용해줬다. 그래도 구글에서 검색은 되야 하므로....


이상이다. 좋은하루 되시길.!
